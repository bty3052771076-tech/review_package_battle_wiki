# 需求文档：Backpack Battles 中文 Wiki 本地复刻

## 背景
目标站点为 https://backpackbattles.wiki.gg/zh/ 的中文 Wiki。用户需要在本地工作区完整复刻该站点内容，用于离线浏览与检索，不部署到服务器。

## 目标
- 在本地工作区生成可离线浏览的静态站点，尽可能还原原站页面结构与内容。
- 覆盖全站所有可浏览页面（以“所有页面”列表为准），不包含广告链接与广告内容。
- 不提供账号、编辑、历史、源代码等管理功能。

## 已观察页面与链接（通过 browserMCP）
- 首页：https://backpackbattles.wiki.gg/zh/
- 物品页：https://backpackbattles.wiki.gg/zh/wiki/物品
- 所有页面列表（分页）：https://backpackbattles.wiki.gg/zh/wiki/Special:AllPages 与其分页链接
- 发现站点结构包括：物品、合成配方、游戏机制、角色、版本历史、分类、统计等
- 页面内出现广告位链接（app.wiki.gg/showcase），应排除

## 范围
### 包含
- 所有“主命名空间”页面及其子页面（参考 Special:AllPages）
- 分类页、列表页（如物品、合成配方、版本历史等）
- 页面中的图片与媒体资源（本地化）
- 站内链接的重写（指向本地路径）
- 可本地使用的站内搜索（不依赖服务端）

### 不包含
- 广告、推广链接、wiki.gg 平台跳转
- 账号登录/注册、编辑、历史、讨论、消息等社区功能
- 服务器端防护、访问控制、反爬虫对抗
- 站外链接抓取（Steam/Discord/YouTube 等外链仅保留为外部链接）

## 功能需求
1. 站点镜像
   - 抓取全站页面内容（HTML 或结构化内容渲染）
   - 站内链接替换为本地路径
2. 页面渲染
   - 保留标题、目录、正文、表格、图文、列表等
   - 保留主要导航（首页、分类、所有页面、搜索）
3. 媒体资源
   - 下载并本地化图片与图标资源
4. 搜索
   - 提供本地全文或标题检索（离线）
5. 版本更新机制（可选）
   - 提供重新抓取与增量更新流程

## 非功能需求
- 纯本地运行：无服务器依赖
- 加载速度快，目录与大表格能正常展开/收起
- 文件输出位于工作区
- 许可遵循 CC BY-SA 4.0（保留许可声明与署名信息）

## 约束
- 不在 C 盘安装任何东西；如需环境，必须在工作区创建虚拟环境
- 仅在工作区写入文件

## 验收标准
- 首页与典型页面（物品、合成配方、角色、版本历史）可离线打开，结构完整
- “所有页面”清单可本地查看（或等价的索引页）
- 站内链接全部指向本地，外链仍指向原站
- 广告内容被移除
- 搜索可用（至少支持标题检索）
- 许可声明可见

## 风险与待确认
- 全站页面数量较多（统计页显示数千页面），需要批量抓取与构建流程
- 某些页面包含复杂模板/脚本，渲染还原度需确认优先级
